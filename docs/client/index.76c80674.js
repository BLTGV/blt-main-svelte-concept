import{s as n,n as t}from"./crossfade.df6f1cc4.js";const s=[];function e(e,o=t){let c;const f=[];function l(t){if(n(e,t)&&(e=t,c)){const n=!s.length;for(let n=0;n<f.length;n+=1){const t=f[n];t[1](),s.push(t,e)}if(n){for(let n=0;n<s.length;n+=2)s[n][0](s[n+1]);s.length=0}}}return{set:l,update:function(n){l(n(e))},subscribe:function(n,s=t){const r=[n,s];return f.push(r),1===f.length&&(c=o(l)||t),n(e),()=>{const n=f.indexOf(r);-1!==n&&f.splice(n,1),0===f.length&&(c(),c=null)}}}}export{e as w};
